# NVENC プラグイン出力

YMM4(ゆっくりMovieMaker4)での動画書き出しを高速化するためのプラグインです。  
NVENCのパイプライン化により非同期でのエンコードを行い、GPUを効率的に使えるようにしています。

## エンコード高速化
品質を損なわずにエンコードを高速化します。  
私の環境(RTX5070Ti/FullHD60fps)でエンコード速度を約2倍にすることに成功しています。  

**このプラグインはベータ版です。予期せぬ不具合が発生する可能性があります。**

``` 
他の環境でのテストが行えていません。エンコード速度の変化や発生したバグなどを報告していただけると大変助かります。  
報告の際はPC環境(特にGPU)とエラーログ/デバッグログを教えてください。
```

## インストール
1. [リリースページ](https://github.com/tarutaru247/YMM4_NVEncPlugin/releases)もしくは[Booth](https://tarutaru247.booth.pm/)から、NVEncPlugin.ymmeをダウンロード
2. ダウンロードしたファイルを開くと、自動的にYMM4のプラグインインストーラーが起動します
3. インストーラーの指示に従いインストール

## 使い方
1. YMM4の出力形式から「NVENC プラグイン出力」を選択
2. コーデック、出力品質、ビットレート方式を設定
3. H.265 の場合は「安定性重視（遅い）」で同期エンコードに切り替え可能（デフォルトは非同期）
4. デバッグログが必要な場合は「デバッグログを書き出す」を有効化
5. 出力形式は`.mp4`

## GPUの選択について
このプラグインは、YMM4本体が使用するGPUをそのまま利用します。  
そのため、YMM4が内蔵GPUなど、NVIDIA以外のGPUで動作している場合このプラグインは正常に動作しません。

以下のようなエラーが出る場合は、YMM4が内蔵GPU側で動作している可能性が高いです。  
- `nvEncOpenEncodeSessionEx failed (1)`  

Windowsの「グラフィック設定」で `YukkuriMovieMaker.exe` を  
**高パフォーマンスGPU（NVIDIA）に固定**してから、再度お試しください。  
手順は公式FAQをご参照ください。  
公式FAQ: https://manjubox.net/ymm4/faq/startup_trouble/select_gpu/


## 必要環境
- Windows 11
- NVIDIA GPU と最新ドライバ

AMD GPUやIntel GPUでは動作しません

## 音声
- AAC固定（Media FoundationのAACエンコーダを使用）

## デバッグログ
- デフォルトでは出力されません
- 「デバッグログを書き出す」を有効にすると、出力ファイルと同じ場所に `.nvenc_log.txt` が生成されます

## 配布用パッケージ
プラグインフォルダをzipで圧縮し、拡張子を`.ymme`に変更するとワンクリックインストールが可能です。

## ライセンス
MIT License

## 免責事項
本プラグインの利用は自己責任でお願いします。利用によって生じたいかなる損害についても作者は責任を負いません。

## 第三者ライセンス/依存関係
- NVIDIA NVENC SDK を使用します（SDK 自体は同梱しません。入手と利用は NVIDIA の EULA に従ってください）
- YukkuriMovieMaker v4 本体は同梱しません（本体の配布・利用は YMM4 の規約に従ってください）

## 作者
たるたる [@tarutaru247](https://x.com/tarutaru247)
